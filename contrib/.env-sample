# ======================================================================
# SISInfo V2 - Variáveis de Ambiente
# ======================================================================
# Copie este arquivo para .env e configure os valores apropriados.
# NÃO comite o arquivo .env no repositório!
# ======================================================================

# ----------------------------------------------------------------------
# DJANGO - Configurações Básicas
# ----------------------------------------------------------------------

# Chave secreta do Django (gere uma nova para produção!)
# Use: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=THIS_IS_NOT_A_GOOD_SECRET

# Modo debug (True para desenvolvimento, False para produção)
DEBUG=True

# Hosts permitidos (separados por vírgula)
ALLOWED_HOSTS=127.0.0.1,localhost,*

# Módulo de settings a usar
# Opções: core.settings.development ou core.settings.production
DJANGO_SETTINGS_MODULE=core.settings.development

# ----------------------------------------------------------------------
# BANCO DE DADOS - PostgreSQL (Supabase ou Local)
# ----------------------------------------------------------------------

# URL de conexão com PostgreSQL
# Desenvolvimento (Docker): postgres://sisinfo:sisinfo@localhost:5432/sisinfo
# Produção (Supabase): postgres://postgres.[ref]:[password]@aws-0-sa-east-1.pooler.supabase.com:6543/postgres
DATABASE_URL=postgres://sisinfo:sisinfo@localhost:5432/sisinfo

# Variáveis adicionais do Supabase (configuradas automaticamente via Vercel Integration)
# POSTGRES_URL=                    # URL com connection pooling (Transaction mode)
# POSTGRES_PRISMA_URL=             # URL para Prisma
# POSTGRES_URL_NON_POOLING=        # URL sem pooling (para migrações)
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=               # Senha do banco
# POSTGRES_HOST=                   # Host do Supabase
# POSTGRES_DATABASE=postgres

# ----------------------------------------------------------------------
# SUPABASE - Configurações Gerais
# ----------------------------------------------------------------------

# URL do projeto Supabase (ex: https://[ref].supabase.co)
# Desenvolvimento local: http://127.0.0.1:54321
SUPABASE_URL=

# Chave anônima (para operações públicas)
# Desenvolvimento local (chave JWT fixa): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_ANON_KEY=

# Chave de serviço (operações administrativas - NUNCA expor no frontend!)
# Desenvolvimento local (chave JWT fixa): eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_DELIVERY_BUCKET=delivery-documents

# ----------------------------------------------------------------------
# SUPABASE STORAGE - Armazenamento de Arquivos
# ----------------------------------------------------------------------

# Usar Supabase Storage para imagens? (True = Supabase, False = Cloudinary)
# Recomendado: True em produção (mesma região do banco)
USE_SUPABASE_STORAGE=False

# Nome do bucket para notas fiscais
SUPABASE_STORAGE_BUCKET=invoices

# ----------------------------------------------------------------------
# CLOUDINARY - Upload de Imagens (Legado/Alternativo)
# ----------------------------------------------------------------------

# Ativar Cloudinary? (True para usar Cloudinary, False para local/Supabase)
# ⚠️ Migrar para Supabase Storage quando possível
USE_CLOUDINARY=False

# URL completa do Cloudinary (obtida no painel do Cloudinary)
# Formato: cloudinary://API_KEY:API_SECRET@CLOUD_NAME
CLOUDINARY_URL=

# ----------------------------------------------------------------------
# BANCO DE DADOS - MongoDB (Logs de Auditoria)
# ----------------------------------------------------------------------

# URL de conexão com MongoDB para logs de auditoria
# Desenvolvimento (Docker): mongodb://sisinfo:sisinfo@localhost:27017/sisinfo_audit?authSource=admin
# Produção (Atlas): mongodb+srv://user:password@cluster.mongodb.net/sisinfo_audit
DATABASE_MONGODB_LOGS=mongodb://sisinfo:sisinfo@localhost:27017/sisinfo_audit?authSource=admin

# ----------------------------------------------------------------------
# GEMINI - OCR de Notas Fiscais
# ----------------------------------------------------------------------

# Chave(s) da API Gemini para leitura automática de notas fiscais
# O OCR é processado via Supabase Edge Functions (ver docs/OCR.md)
# Suporte a múltiplas chaves para rotação automática (limite diário)
# Formato: chave1,chave2,chave3,chave4,chave5
GEMINI_API_KEY=

# Modelo do Gemini a usar (verifique disponibilidade)
GEMINI_MODEL=gemini-flash-latest

# (Opcional) Override da URL base para callback do OCR
# Use apenas em desenvolvimento local com Docker/WSL
# Para Docker Desktop + WSL: http://host.docker.internal:8000
# Não defina em produção - usará VERCEL_URL automaticamente
# CALLBACK_BASE_URL=http://host.docker.internal:8000

# ----------------------------------------------------------------------
# BROWSERLESS - Geração de PDFs
# ----------------------------------------------------------------------

# URL/Token do Browserless para geração de PDFs
# Desenvolvimento (Docker): ws://localhost:3000?token=sisinfo_dev_token
# Produção (Browserless.io): wss://production-sfo.browserless.io?token=YOUR_KEY
BROWSERLESS_API_KEY=ws://localhost:3000?token=sisinfo_dev_token

# ----------------------------------------------------------------------
# EMAIL - Configurações de Envio
# ----------------------------------------------------------------------

# Backend de email
# Desenvolvimento: django.core.mail.backends.console.EmailBackend (exibe no terminal)
# Produção: django.core.mail.backends.smtp.EmailBackend
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=localhost
EMAIL_PORT=25
EMAIL_USE_TLS=False
EMAIL_USE_SSL=False
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

# Email para notificação de entregas ao Patrimônio
EMAIL_PATRIMONIO=patrimonio@novohorizonte.sp.gov.br
EMAIL_TI_DOC=ti@novohorizonte.sp.gov.br

# ----------------------------------------------------------------------
# LOGGING - Configurações de Log
# ----------------------------------------------------------------------

# Nível de log (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Arquivo de log
LOG_FILE=logs/django.log

EMAIL_PATRIMONIO=patrimonio@novohorizonte.sp.gov.br
EMAIL_TI_DOC=ti@novohorizonte.sp.gov.br